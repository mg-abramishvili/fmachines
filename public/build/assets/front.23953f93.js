import{_ as g,c as i,F as h,r as k,a as _,b as e,w as p,v as y,d as b,e as u,o as r,t as d,f as v,g as w}from"./_plugin-vue_export-helper.99c484ff.js";function C(s){return{all:s=s||new Map,on:function(t,a){var l=s.get(t);l?l.push(a):s.set(t,[a])},off:function(t,a){var l=s.get(t);l&&(a?l.splice(l.indexOf(a)>>>0,1):s.set(t,[]))},emit:function(t,a){var l=s.get(t);l&&l.slice().map(function(n){n(a)}),(l=s.get("*"))&&l.slice().map(function(n){n(t,a)})}}}const x={data(){return{name:"",tel:"",policy:!1,errors:[],views:{success:!1,error:!1}}},methods:{save(){if(this.views.error=!1,this.errors=[],this.name||this.errors.push("\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0438\u043C\u044F"),this.tel||this.errors.push("\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0442\u0435\u043B\u0435\u0444\u043E\u043D"),this.policy||this.errors.push("\u041D\u0443\u0436\u043D\u043E \u0441\u043E\u0433\u043B\u0430\u0441\u0438\u0442\u044C\u0441\u044F \u0441 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u043E\u0439 \u043F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445"),this.errors.length>0){this.views.error=!0;return}axios.post("/_leads",{name:this.name,tel:this.tel}).then(s=>{this.name="",this.tel="",this.policy=!1,this.views.success=!0,setTimeout(()=>{this.views.success=!1},3e3)})}}},q={class:"lead-form"},B={key:0,class:"alert alert-danger"},E={class:"d-block"},M={key:1,class:"alert alert-success"},Q={class:"row"},V={class:"col-12 mb-4"},T=e("label",{class:"fw-bold"},"\u0418\u043C\u044F",-1),z={class:"col-12 mb-4"},P=e("label",{class:"fw-bold"},"\u0422\u0435\u043B\u0435\u0444\u043E\u043D",-1),U={class:"form-check mb-4"},$=e("label",{class:"form-check-label",for:"check_"},[u(" \u0421\u043E\u0433\u043B\u0430\u0441\u0435\u043D \u0441 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u043E\u0439 \u043F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445 "),e("a",{href:"/policy",target:"_blank"},"(!)")],-1);function H(s,t,a,l,n,c){return r(),i("div",q,[n.views.error?(r(),i("div",B,[(r(!0),i(h,null,k(n.errors,o=>(r(),i("small",E,d(o),1))),256))])):_("",!0),n.views.success?(r(),i("div",M," \u0417\u0430\u044F\u0432\u043A\u0430 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0430! ")):_("",!0),e("div",Q,[e("div",V,[T,p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>n.name=o),type:"text",class:"form-control",placeholder:"\u041A\u0430\u043A \u0432\u0430\u0441 \u0437\u043E\u0432\u0443\u0442"},null,512),[[y,n.name]])]),e("div",z,[P,p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>n.tel=o),type:"text",class:"form-control",placeholder:"\u0412\u0430\u0448 \u043D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430"},null,512),[[y,n.tel]])])]),e("div",U,[p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>n.policy=o),class:"form-check-input",type:"checkbox",id:"check_"},null,512),[[b,n.policy]]),$]),e("button",{onClick:t[3]||(t[3]=o=>c.save()),class:"btn btn-primary"},"\u041E\u0444\u043E\u0440\u043C\u0438\u0442\u044C")])}const A=g(x,[["render",H]]),L={props:["product"],data(){return{cart:[],views:{loading:!0}}},mounted(){this.getCartInfo()},methods:{getCartInfo(){axios.get("/_cart_data").then(s=>{this.cart=s.data,this.views.loading=!1})},add(){axios.post(`/add-to-cart/${this.product}`).then(s=>{this.getCartInfo(),this.emitter.emit("cart","1")})}}},N={key:0,href:"/cart",class:"btn btn-standard"};function D(s,t,a,l,n,c){return r(),i("div",null,[n.cart&&n.cart.find(o=>o.id==a.product)?(r(),i("a",N,"\u0412 \u043A\u043E\u0440\u0437\u0438\u043D\u0435")):(r(),i("button",{key:1,onClick:t[0]||(t[0]=o=>c.add()),class:"btn btn-standard"},"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u043A\u043E\u0440\u0437\u0438\u043D\u0443"))])}const F=g(L,[["render",D]]),j={props:["lang"],data(){return{cart:[],views:{loading:!0}}},mounted(){this.getCartInfo(),this.emitter.on("cart",s=>{this.cart=s})},methods:{getCartInfo(){v.get("/_cart_data").then(s=>{this.cart=s.data,this.views.loading=!1})}}},O={href:"/cart"},S={class:"cart-icon"},G=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-cart",viewBox:"0 0 16 16"},[e("path",{d:"M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l1.313 7h8.17l1.313-7H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"})],-1),J={key:0};function K(s,t,a,l,n,c){return r(),i("a",O,[e("div",S,[G,n.cart&&n.cart.length?(r(),i("span",J,d(n.cart.map(o=>o.quantity).reduce((o,f)=>o+f,0)),1)):_("",!0)]),a.lang=="en"?(r(),i(h,{key:0},[u("Cart")],64)):(r(),i(h,{key:1},[u("\u041A\u043E\u0440\u0437\u0438\u043D\u0430")],64))])}const R=g(j,[["render",K]]),W={props:["lang"],data(){return{cart:"",name:"",tel:"",policy:!1,errors:[],views:{loading:!0,success:!1,error:!1}}},mounted(){this.getCartInfo(),this.views.loading=!1},computed:{totalQuantity(){if(this.cart)return this.cart.map(s=>s.quantity).reduce((s,t)=>s+t,0)},totalPrice(){if(this.cart){let s=[];return this.lang=="en"?this.cart.forEach(t=>{s.push(t.quantity*t.price_usd)}):this.cart.forEach(t=>{s.push(t.quantity*t.price_rub)}),s.reduce((t,a)=>t+a,0)}}},methods:{getCartInfo(){v.get("/_cart_data").then(s=>{this.cart=s.data})},updateCart(){this.views.loading=!0,this.emitter.emit("cart",this.cart),v.post("/update-cart",{cart:this.cart}).then(s=>{this.getCartInfo(),setTimeout(()=>this.views.loading=!1,1e3)})},updateQuantity(s){var t=parseInt(document.getElementById("quantity_"+s.sku).value);t!==0&&(document.getElementById("quantity_"+s.sku).value=t,s.quantity=t),this.updateCart()},updateQuantityMinus(s){var t=parseInt(document.getElementById("quantity_"+s.sku).value);t!==0&&t!==1&&(document.getElementById("quantity_"+s.sku).value=t-1,s.quantity=t-1),this.updateCart()},updateQuantityPlus(s){var t=parseInt(document.getElementById("quantity_"+s.sku).value);document.getElementById("quantity_"+s.sku).value=t+1,s.quantity=t+1,this.updateCart()},remove(s){v.get(`/delete-from-cart/${s}`).then(t=>{this.getCartInfo()})},save(){if(this.views.error=!1,this.errors=[],this.name||this.errors.push("\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0438\u043C\u044F"),this.tel||this.errors.push("\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0442\u0435\u043B\u0435\u0444\u043E\u043D"),this.policy||this.errors.push("\u041D\u0443\u0436\u043D\u043E \u0441\u043E\u0433\u043B\u0430\u0441\u0438\u0442\u044C\u0441\u044F \u0441 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u043E\u0439 \u043F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445"),this.errors.length>0){this.views.error=!0;return}v.post("/_leads",{name:this.name,tel:this.tel,subject:"\u0417\u0430\u043A\u0430\u0437",order:this.cart}).then(s=>{this.name="",this.tel="",this.policy=!1,this.views.success=!0,setTimeout(()=>{window.location.href="/"},5e3)})}}},X={class:"cart-wrapper"},Y={key:0,class:"card-loader"},Z=e("div",{class:"spinner-border text-dark",role:"status"},[e("span",{class:"visually-hidden"},"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430...")],-1),I=[Z],tt={key:1},et={key:2,class:"row"},st={class:"col-12 col-lg-12"},ot={class:"row align-items-center"},nt={class:"col cart-item-col-name"},it=["href"],rt={class:"col cart-item-col-quantity"},at=["onClick"],lt=["onChange","id","value"],ct=["onClick"],dt={class:"col cart-item-col-price"},ut={key:0},ht={key:1},_t={class:"col cart-item-col-del"},pt=["onClick"],mt={class:"col-12 cart-total"},ft={key:0},vt={key:1},yt={class:"col-12 col-lg-12"},gt={class:"cart-panel"},kt={key:0,class:"alert alert-danger"},bt={class:"d-block"},wt={class:"row align-items-end"},Ct={class:"col-12 col-lg-9"},xt={class:"row"},qt={class:"col-12 col-lg-6"},Bt=e("label",{class:"form-label"},"\u0418\u043C\u044F",-1),Et={class:"col-12 col-lg-6"},Mt=e("label",{class:"form-label"},"\u0422\u0435\u043B\u0435\u0444\u043E\u043D",-1),Qt={class:"form-check mb-4"},Vt=e("label",{class:"form-check-label",for:"check_"},[u(" \u0421\u043E\u0433\u043B\u0430\u0441\u0435\u043D \u0441 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u043E\u0439 \u043F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445 "),e("a",{href:"/policy",target:"_blank"},"(!)")],-1),Tt={class:"col-12 col-lg-3"};function zt(s,t,a,l,n,c){return r(),i("div",X,[n.views.loading?(r(),i("div",Y,I)):_("",!0),n.views.success?(r(),i("div",tt," \u0412\u0430\u0448 \u0437\u0430\u043A\u0430\u0437 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D! ")):_("",!0),n.cart&&a.lang&&!n.views.success?(r(),i("div",et,[e("div",st,[(r(!0),i(h,null,k(n.cart,o=>(r(),i("div",{key:"cartItem_"+o.sku,class:"cart-item"},[e("div",ot,[e("div",nt,[e("a",{href:"/product/"+o.id},[a.lang=="en"?(r(),i(h,{key:0},[u(d(o.name_eng),1)],64)):(r(),i(h,{key:1},[u(d(o.name),1)],64))],8,it)]),e("div",rt,[e("button",{onClick:f=>c.updateQuantityMinus(o),class:"btn btn-sm btn-outline-standard"},"-",8,at),e("input",{onChange:f=>c.updateQuantity(o),type:"number",id:"quantity_"+o.sku,value:o.quantity,min:"1",class:"form-control w-25 d-inline-flex cart-item-amount"},null,40,lt),e("button",{onClick:f=>c.updateQuantityPlus(o),class:"btn btn-sm btn-outline-standard"},"+",8,ct)]),e("div",dt,[a.lang=="en"?(r(),i("strong",ut," $"+d(o.price_usd*o.quantity),1)):(r(),i("strong",ht,d(o.price_rub*o.quantity)+" \u20BD ",1))]),e("div",_t,[e("button",{onClick:f=>c.remove(o.sku),class:"btn btn-sm btn-outline-danger"},"\xD7",8,pt)])])]))),128))]),e("div",mt,[a.lang=="en"?(r(),i("p",ft,[u("Total products: "),e("strong",null,d(c.totalQuantity),1),u(" and total price is "),e("strong",null,"$"+d(c.totalPrice),1)])):(r(),i("p",vt,[u("\u0412\u0441\u0435\u0433\u043E \u0442\u043E\u0432\u0430\u0440\u043E\u0432: "),e("strong",null,d(c.totalQuantity),1),u(" \u043D\u0430 \u0441\u0443\u043C\u043C\u0443 "),e("strong",null,d(c.totalPrice)+" \u0440\u0443\u0431.",1)]))]),e("div",yt,[e("div",gt,[n.views.error?(r(),i("div",kt,[(r(!0),i(h,null,k(n.errors,o=>(r(),i("small",bt,d(o),1))),256))])):_("",!0),e("div",wt,[e("div",Ct,[e("div",xt,[e("div",qt,[Bt,p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>n.name=o),type:"text",class:"form-control"},null,512),[[y,n.name]])]),e("div",Et,[Mt,p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>n.tel=o),type:"text",class:"form-control"},null,512),[[y,n.tel]])])]),e("div",Qt,[p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>n.policy=o),class:"form-check-input",type:"checkbox",id:"check_"},null,512),[[b,n.policy]]),Vt])]),e("div",Tt,[e("button",{onClick:t[3]||(t[3]=o=>c.save()),class:"btn btn-standard w-100"},"\u041E\u0444\u043E\u0440\u043C\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437")])])])])])):_("",!0)])}const Pt=g(W,[["render",zt]]),Ut=C(),m=w({});m.component("create-lead",A);m.component("add-to-cart",F);m.component("minicart",R);m.component("cart",Pt);m.config.globalProperties.emitter=Ut;m.mount("#front");
