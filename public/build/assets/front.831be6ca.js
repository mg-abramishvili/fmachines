import{_ as g,c as i,a as e,b as h,o as r,F as _,r as k,w as f,v as y,d as b,e as u,t as d,f as v,g as w}from"./_plugin-vue_export-helper.ee08f2d5.js";function C(s){return{all:s=s||new Map,on:function(t,a){var l=s.get(t);l?l.push(a):s.set(t,[a])},off:function(t,a){var l=s.get(t);l&&(a?l.splice(l.indexOf(a)>>>0,1):s.set(t,[]))},emit:function(t,a){var l=s.get(t);l&&l.slice().map(function(n){n(a)}),(l=s.get("*"))&&l.slice().map(function(n){n(t,a)})}}}const x={data(){return{ok:!1}},created(){this.getAgeInfo()},methods:{getAgeInfo(){axios.get("/_age").then(s=>{s.data=="18"&&(this.ok=!0)})},proceed(){axios.post("/_age",{age:"18"}).then(s=>{this.getAgeInfo()})}}},q={key:0,class:"age"},$={class:"age-inner"},B=e("div",{class:"age-circle"}," 18+ ",-1),E={class:"age-buttons"},M=e("a",{href:"https://google.ru"},"\u041C\u043D\u0435 \u043C\u0435\u043D\u044C\u0448\u0435 18 \u043B\u0435\u0442",-1);function Q(s,t,a,l,n,c){return n.ok?h("",!0):(r(),i("div",q,[e("div",$,[B,e("div",E,[e("button",{onClick:t[0]||(t[0]=o=>c.proceed())},"\u041C\u043D\u0435 18 \u043B\u0435\u0442 \u0438\u043B\u0438 \u0431\u043E\u043B\u044C\u0448\u0435"),M])])]))}const V=g(x,[["render",Q]]),A={data(){return{name:"",tel:"",policy:!1,errors:[],views:{success:!1,error:!1}}},methods:{save(){if(this.views.error=!1,this.errors=[],this.name||this.errors.push("\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0438\u043C\u044F"),this.tel||this.errors.push("\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0442\u0435\u043B\u0435\u0444\u043E\u043D"),this.policy||this.errors.push("\u041D\u0443\u0436\u043D\u043E \u0441\u043E\u0433\u043B\u0430\u0441\u0438\u0442\u044C\u0441\u044F \u0441 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u043E\u0439 \u043F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445"),this.errors.length>0){this.views.error=!0;return}axios.post("/_leads",{name:this.name,tel:this.tel}).then(s=>{this.name="",this.tel="",this.policy=!1,this.views.success=!0,setTimeout(()=>{this.views.success=!1},3e3)})}}},T={class:"lead-form"},z={key:0,class:"alert alert-danger"},P={class:"d-block"},U={key:1,class:"alert alert-success"},H={class:"row"},L={class:"col-12 mb-4"},N=e("label",{class:"fw-bold"},"\u0418\u043C\u044F",-1),D={class:"col-12 mb-4"},F=e("label",{class:"fw-bold"},"\u0422\u0435\u043B\u0435\u0444\u043E\u043D",-1),j={class:"form-check mb-4"},I=e("label",{class:"form-check-label",for:"check_"},[u(" \u0421\u043E\u0433\u043B\u0430\u0441\u0435\u043D \u0441 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u043E\u0439 \u043F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445 "),e("a",{href:"/policy",target:"_blank"},"(!)")],-1);function O(s,t,a,l,n,c){return r(),i("div",T,[n.views.error?(r(),i("div",z,[(r(!0),i(_,null,k(n.errors,o=>(r(),i("small",P,d(o),1))),256))])):h("",!0),n.views.success?(r(),i("div",U," \u0417\u0430\u044F\u0432\u043A\u0430 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0430! ")):h("",!0),e("div",H,[e("div",L,[N,f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>n.name=o),type:"text",class:"form-control",placeholder:"\u041A\u0430\u043A \u0432\u0430\u0441 \u0437\u043E\u0432\u0443\u0442"},null,512),[[y,n.name]])]),e("div",D,[F,f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>n.tel=o),type:"text",class:"form-control",placeholder:"\u0412\u0430\u0448 \u043D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430"},null,512),[[y,n.tel]])])]),e("div",j,[f(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>n.policy=o),class:"form-check-input",type:"checkbox",id:"check_"},null,512),[[b,n.policy]]),I]),e("button",{onClick:t[3]||(t[3]=o=>c.save()),class:"btn btn-primary"},"\u041E\u0444\u043E\u0440\u043C\u0438\u0442\u044C")])}const S=g(A,[["render",O]]),G={props:["product"],data(){return{cart:[],views:{loading:!0}}},mounted(){this.getCartInfo()},methods:{getCartInfo(){axios.get("/_cart_data").then(s=>{this.cart=s.data,this.views.loading=!1,this.emitter.emit("cart",s.data)})},add(){axios.post(`/add-to-cart/${this.product}`).then(s=>{this.getCartInfo()})}}},J={key:0,href:"/cart",class:"btn btn-standard"};function K(s,t,a,l,n,c){return r(),i("div",null,[n.cart&&n.cart.find(o=>o.id==a.product)?(r(),i("a",J,"\u0412 \u043A\u043E\u0440\u0437\u0438\u043D\u0435")):(r(),i("button",{key:1,onClick:t[0]||(t[0]=o=>c.add()),class:"btn btn-standard"},"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u043A\u043E\u0440\u0437\u0438\u043D\u0443"))])}const R=g(G,[["render",K]]),W={props:["lang"],data(){return{cart:[],views:{loading:!0}}},mounted(){this.getCartInfo(),this.emitter.on("cart",s=>{this.cart=s})},methods:{getCartInfo(){v.get("/_cart_data").then(s=>{this.cart=s.data,this.views.loading=!1})}}},X={href:"/cart"},Y={class:"cart-icon"},Z=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-cart",viewBox:"0 0 16 16"},[e("path",{d:"M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l1.313 7h8.17l1.313-7H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"})],-1),tt={key:0};function et(s,t,a,l,n,c){return r(),i("a",X,[e("div",Y,[Z,n.cart&&n.cart.length?(r(),i("span",tt,d(n.cart.map(o=>o.quantity).reduce((o,m)=>o+m,0)),1)):h("",!0)]),a.lang=="en"?(r(),i(_,{key:0},[u("Cart")],64)):(r(),i(_,{key:1},[u("\u041A\u043E\u0440\u0437\u0438\u043D\u0430")],64))])}const st=g(W,[["render",et]]),ot={props:["lang"],data(){return{cart:"",name:"",tel:"",policy:!1,errors:[],views:{loading:!0,success:!1,error:!1}}},mounted(){this.getCartInfo(),this.views.loading=!1},computed:{totalQuantity(){if(this.cart)return this.cart.map(s=>s.quantity).reduce((s,t)=>s+t,0)},totalPrice(){if(this.cart){let s=[];return this.lang=="en"?this.cart.forEach(t=>{s.push(t.quantity*t.price_usd)}):this.cart.forEach(t=>{s.push(t.quantity*t.price_rub)}),s.reduce((t,a)=>t+a,0)}}},methods:{getCartInfo(){v.get("/_cart_data").then(s=>{this.cart=s.data,this.cart.length===0&&(window.location.href="/cart")})},updateCart(){this.views.loading=!0,this.emitter.emit("cart",this.cart),v.post("/update-cart",{cart:this.cart}).then(s=>{this.getCartInfo(),setTimeout(()=>this.views.loading=!1,1e3)})},updateQuantity(s){var t=parseInt(document.getElementById("quantity_"+s.sku).value);t!==0&&(document.getElementById("quantity_"+s.sku).value=t,s.quantity=t),this.updateCart()},updateQuantityMinus(s){var t=parseInt(document.getElementById("quantity_"+s.sku).value);t!==0&&t!==1&&(document.getElementById("quantity_"+s.sku).value=t-1,s.quantity=t-1),this.updateCart()},updateQuantityPlus(s){var t=parseInt(document.getElementById("quantity_"+s.sku).value);document.getElementById("quantity_"+s.sku).value=t+1,s.quantity=t+1,this.updateCart()},remove(s){v.get(`/delete-from-cart/${s}`).then(t=>{this.getCartInfo()})},save(){if(this.views.error=!1,this.errors=[],this.name||this.errors.push("\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0438\u043C\u044F"),this.tel||this.errors.push("\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0442\u0435\u043B\u0435\u0444\u043E\u043D"),this.policy||this.errors.push("\u041D\u0443\u0436\u043D\u043E \u0441\u043E\u0433\u043B\u0430\u0441\u0438\u0442\u044C\u0441\u044F \u0441 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u043E\u0439 \u043F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445"),this.errors.length>0){this.views.error=!0;return}v.post("/_leads",{name:this.name,tel:this.tel,subject:"\u0417\u0430\u043A\u0430\u0437",order:this.cart}).then(s=>{this.name="",this.tel="",this.policy=!1,this.views.success=!0,setTimeout(()=>{window.location.href="/"},5e3)})}}},nt={class:"cart-wrapper"},it={key:0,class:"card-loader"},rt=e("div",{class:"spinner-border text-dark",role:"status"},[e("span",{class:"visually-hidden"},"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430...")],-1),at=[rt],lt={key:1},ct={key:2,class:"row"},dt={class:"col-12 col-lg-12"},ut={class:"row align-items-center"},ht={class:"col cart-item-col-name"},_t=["href"],pt={class:"col cart-item-col-quantity"},ft=["onClick"],mt=["onChange","id","value"],vt=["onClick"],gt={class:"col cart-item-col-price"},yt={key:0},kt={key:1},bt={class:"col cart-item-col-del"},wt=["onClick"],Ct={class:"col-12 cart-total"},xt={key:0},qt={key:1},$t={class:"col-12 col-lg-12"},Bt={class:"cart-panel"},Et={key:0,class:"alert alert-danger"},Mt={class:"d-block"},Qt={class:"row align-items-end"},Vt={class:"col-12 col-lg-9"},At={class:"row"},Tt={class:"col-12 col-lg-6"},zt=e("label",{class:"form-label"},"\u0418\u043C\u044F",-1),Pt={class:"col-12 col-lg-6"},Ut=e("label",{class:"form-label"},"\u0422\u0435\u043B\u0435\u0444\u043E\u043D",-1),Ht={class:"form-check mb-4"},Lt=e("label",{class:"form-check-label",for:"check_"},[u(" \u0421\u043E\u0433\u043B\u0430\u0441\u0435\u043D \u0441 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u043E\u0439 \u043F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445 "),e("a",{href:"/policy",target:"_blank"},"(!)")],-1),Nt={class:"col-12 col-lg-3"};function Dt(s,t,a,l,n,c){return r(),i("div",nt,[n.views.loading?(r(),i("div",it,at)):h("",!0),n.views.success?(r(),i("div",lt," \u0412\u0430\u0448 \u0437\u0430\u043A\u0430\u0437 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D! ")):h("",!0),n.cart&&a.lang&&!n.views.success?(r(),i("div",ct,[e("div",dt,[(r(!0),i(_,null,k(n.cart,o=>(r(),i("div",{key:"cartItem_"+o.sku,class:"cart-item"},[e("div",ut,[e("div",ht,[e("a",{href:"/product/"+o.id},[a.lang=="en"?(r(),i(_,{key:0},[u(d(o.name_eng),1)],64)):(r(),i(_,{key:1},[u(d(o.name),1)],64))],8,_t)]),e("div",pt,[e("button",{onClick:m=>c.updateQuantityMinus(o),class:"btn btn-sm btn-outline-standard"},"-",8,ft),e("input",{onChange:m=>c.updateQuantity(o),type:"number",id:"quantity_"+o.sku,value:o.quantity,min:"1",class:"form-control w-25 d-inline-flex cart-item-amount"},null,40,mt),e("button",{onClick:m=>c.updateQuantityPlus(o),class:"btn btn-sm btn-outline-standard"},"+",8,vt)]),e("div",gt,[a.lang=="en"?(r(),i("strong",yt," $"+d(o.price_usd*o.quantity),1)):(r(),i("strong",kt,d(o.price_rub*o.quantity)+" \u20BD ",1))]),e("div",bt,[e("button",{onClick:m=>c.remove(o.sku),class:"btn btn-sm btn-outline-danger"},"\xD7",8,wt)])])]))),128))]),e("div",Ct,[a.lang=="en"?(r(),i("p",xt,[u("Total products: "),e("strong",null,d(c.totalQuantity),1),u(" and total price is "),e("strong",null,"$"+d(c.totalPrice),1)])):(r(),i("p",qt,[u("\u0412\u0441\u0435\u0433\u043E \u0442\u043E\u0432\u0430\u0440\u043E\u0432: "),e("strong",null,d(c.totalQuantity),1),u(" \u043D\u0430 \u0441\u0443\u043C\u043C\u0443 "),e("strong",null,d(c.totalPrice)+" \u0440\u0443\u0431.",1)]))]),e("div",$t,[e("div",Bt,[n.views.error?(r(),i("div",Et,[(r(!0),i(_,null,k(n.errors,o=>(r(),i("small",Mt,d(o),1))),256))])):h("",!0),e("div",Qt,[e("div",Vt,[e("div",At,[e("div",Tt,[zt,f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>n.name=o),type:"text",class:"form-control"},null,512),[[y,n.name]])]),e("div",Pt,[Ut,f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>n.tel=o),type:"text",class:"form-control"},null,512),[[y,n.tel]])])]),e("div",Ht,[f(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>n.policy=o),class:"form-check-input",type:"checkbox",id:"check_"},null,512),[[b,n.policy]]),Lt])]),e("div",Nt,[e("button",{onClick:t[3]||(t[3]=o=>c.save()),class:"btn btn-standard w-100"},"\u041E\u0444\u043E\u0440\u043C\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437")])])])])])):h("",!0)])}const Ft=g(ot,[["render",Dt]]),jt=C(),p=w({});p.component("age",V);p.component("create-lead",S);p.component("add-to-cart",R);p.component("minicart",st);p.component("cart",Ft);p.config.globalProperties.emitter=jt;p.mount("#front");
